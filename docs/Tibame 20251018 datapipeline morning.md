# Data Pipeline 課堂筆記（2025/10/18 上午）

## Pandas Merge 寫法習慣

-   以實務專案為背景，提醒開發時盡量在 `pd.merge` 中明列 `left_on`、`right_on`、`how` 等參數，避免僅靠 Pandas 的自動推斷。
-   透過完整標註欄位對齊邏輯，讓團隊成員能快速理解資料合併條件，降低隱含行為造成的誤解。

------------------------------------------------------------------------

## Concat 與 SQL Union 的對照

-   比較 `pd.concat` 與 SQL `UNION` / `UNION ALL` 的概念差異，強調欄位位置不同時 Pandas 會依欄位名稱對齊。
-   說明何時應在串接後補上 `reset_index(drop=True)`，保持索引連續並避免多餘欄位。

------------------------------------------------------------------------

## 資料轉置：Melt 操作

-   以學生考試成績表為例，示範如何使用 `pd.melt` 將寬表轉為長表，避免每新增一次考試就得調整 schema。
-   解釋 `id_vars`、`value_vars`、`var_name`、`value_name` 的角色，並討論在傳產常遇到的 Excel 原始資料清洗需求。

------------------------------------------------------------------------

## 群組排序與流水號

-   建立商品交易資料表後，透過 `groupby(...).cumcount()` 產生每筆交易的排序序號，並建議將結果加一使首筆排序從 1 開始，與 SQL 規範一致。
-   演練如何搭配 `sort_values(['date', 'product', 'sales'], ascending=[True, True, False])`，鎖定每日各商品銷售額最高的交易紀錄。

------------------------------------------------------------------------

## SQL 與 Pandas 心態轉換

-   以面試題為例，強調先透過排序決定優先級，再用流水號或條件篩選保留關鍵紀錄。
-   引導同學建立「先想 SQL 寫法，再套回 Pandas」的思路，逐步建立兩種語法間的互補關係。
